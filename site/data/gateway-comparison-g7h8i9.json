{
  "name": "gateway-comparison-g7h8i9",
  "namespace": "experiments",
  "description": "Gateway comparison - NGINX Ingress vs Traefik vs Envoy Gateway feature and performance analysis",
  "createdAt": "2026-02-05T09:00:00Z",
  "completedAt": "2026-02-05T10:15:00Z",
  "durationSeconds": 4500,
  "phase": "Complete",
  "tags": ["networking", "comparison", "gateway"],
  "targets": [
    {
      "name": "app",
      "clusterName": "gateway-comparison-g7h8i9-app",
      "clusterType": "gke",
      "machineType": "e2-standard-2",
      "nodeCount": 3,
      "components": [
        "nginx-ingress",
        "traefik",
        "envoy-gateway",
        "nginx"
      ]
    }
  ],
  "workflow": {
    "name": "gateway-comparison-g7h8i9-validation",
    "template": "gateway-comparison-validation",
    "phase": "Succeeded",
    "startedAt": "2026-02-05T09:04:00Z",
    "finishedAt": "2026-02-05T10:12:00Z"
  },
  "metrics": {
    "collectedAt": "2026-02-05T10:14:00Z",
    "timeRange": {
      "start": "2026-02-05T09:00:00Z",
      "end": "2026-02-05T10:15:00Z",
      "duration": "1h15m0s",
      "stepSeconds": 60
    },
    "queries": {
      "throughput": {
        "query": "rate(http_requests_total{experiment=\"gateway-comparison-g7h8i9\"}[5m])",
        "type": "range",
        "unit": "req/s",
        "description": "Request throughput over time",
        "data": [
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:10:00Z", "value": 4200 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:20:00Z", "value": 4800 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:30:00Z", "value": 5100 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:40:00Z", "value": 5300 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:50:00Z", "value": 5200 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:00:00Z", "value": 5400 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:10:00Z", "value": 5350 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:10:00Z", "value": 3800 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:20:00Z", "value": 4100 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:30:00Z", "value": 4300 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:40:00Z", "value": 4500 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:50:00Z", "value": 4400 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:00:00Z", "value": 4600 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:10:00Z", "value": 4550 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:10:00Z", "value": 5500 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:20:00Z", "value": 6200 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:30:00Z", "value": 6800 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:40:00Z", "value": 7100 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:50:00Z", "value": 7000 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:00:00Z", "value": 7200 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:10:00Z", "value": 7150 }
        ]
      },
      "p99_latency": {
        "query": "histogram_quantile(0.99, rate(http_request_duration_seconds_bucket{experiment=\"gateway-comparison-g7h8i9\"}[5m]))",
        "type": "range",
        "unit": "seconds",
        "description": "P99 request latency over time",
        "data": [
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:10:00Z", "value": 0.008 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:20:00Z", "value": 0.009 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:30:00Z", "value": 0.011 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:40:00Z", "value": 0.010 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T09:50:00Z", "value": 0.012 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:00:00Z", "value": 0.011 },
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:10:00Z", "value": 0.010 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:10:00Z", "value": 0.012 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:20:00Z", "value": 0.014 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:30:00Z", "value": 0.015 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:40:00Z", "value": 0.016 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T09:50:00Z", "value": 0.015 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:00:00Z", "value": 0.017 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:10:00Z", "value": 0.016 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:10:00Z", "value": 0.005 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:20:00Z", "value": 0.006 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:30:00Z", "value": 0.006 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:40:00Z", "value": 0.007 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T09:50:00Z", "value": 0.006 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:00:00Z", "value": 0.007 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:10:00Z", "value": 0.007 }
        ]
      },
      "cpu_usage": {
        "query": "rate(container_cpu_usage_seconds_total{experiment=\"gateway-comparison-g7h8i9\"}[5m])",
        "type": "instant",
        "unit": "cores",
        "description": "CPU usage per gateway under load",
        "data": [
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:15:00Z", "value": 0.42 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:15:00Z", "value": 0.38 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:15:00Z", "value": 0.55 }
        ]
      },
      "memory_usage": {
        "query": "container_memory_working_set_bytes{experiment=\"gateway-comparison-g7h8i9\"}",
        "type": "instant",
        "unit": "bytes",
        "description": "Memory usage per gateway",
        "data": [
          { "labels": { "target": "nginx-ingress" }, "timestamp": "2026-02-05T10:15:00Z", "value": 134217728 },
          { "labels": { "target": "traefik" }, "timestamp": "2026-02-05T10:15:00Z", "value": 104857600 },
          { "labels": { "target": "envoy" }, "timestamp": "2026-02-05T10:15:00Z", "value": 209715200 }
        ]
      }
    }
  },
  "costEstimate": {
    "totalUSD": 0.25,
    "durationHours": 1.25,
    "perTarget": {
      "app": 0.25
    },
    "note": "Rough estimate based on on-demand GCE pricing (e2-standard-2 x3 nodes, preemptible); actual cost may differ."
  },
  "analysis": {
    "summary": "Envoy Gateway delivered the highest throughput (7.15k req/s) with the lowest P99 latency (7ms), outperforming NGINX Ingress (5.35k req/s, 10ms) and Traefik (4.55k req/s, 16ms). However, Envoy used 31% more CPU (0.55 vs 0.42 cores) and 56% more memory (200MB vs 128MB) than NGINX. Traefik was the most resource-efficient but had the lowest throughput.",
    "metricInsights": {
      "throughput": "Envoy sustained 7.15k req/s at steady state, 34% higher than NGINX Ingress (5.35k) and 57% higher than Traefik (4.55k). All three gateways showed stable throughput after initial warmup, indicating no degradation under sustained load.",
      "p99_latency": "Envoy maintained P99 latency at 5-7ms throughout the test, while NGINX ranged 8-12ms and Traefik 12-17ms. The latency gap between Envoy and competitors widened slightly under load, suggesting Envoy's event loop handles concurrency more efficiently.",
      "cpu_usage": "Envoy used 0.55 cores versus NGINX's 0.42 and Traefik's 0.38. When normalized by throughput, Envoy processes 13k req/s per core compared to NGINX's 12.7k and Traefik's 12k â€” making Envoy slightly more CPU-efficient per request.",
      "memory_usage": "Envoy's 200MB memory footprint is higher than NGINX (128MB) and Traefik (100MB), reflecting its richer filter chain and xDS configuration model. For environments with strict memory budgets, Traefik offers the smallest footprint."
    },
    "recommendations": [
      "Choose Envoy Gateway for high-throughput, latency-sensitive workloads where its superior performance justifies the additional resource overhead.",
      "Use NGINX Ingress for general-purpose ingress where broad ecosystem support and moderate resource usage are priorities over peak performance.",
      "Consider Traefik for development or low-traffic environments where auto-discovery features and minimal resource consumption outweigh raw performance."
    ],
    "generatedAt": "2026-02-09T12:00:00Z",
    "model": "claude-opus-4-6"
  }
}
