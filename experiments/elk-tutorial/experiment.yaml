apiVersion: experiments.illm.io/v1alpha1
kind: Experiment
metadata:
  generateName: elk-tutorial-
  namespace: experiments
spec:
  description: "ELK stack tutorial - Elasticsearch, Kibana, Fluent Bit log analytics"
  tags: ["tutorial", "observability", "logging"]
  ttlDays: 7

  targets:
    - name: app
      cluster:
        type: gke
        preemptible: true
      components:
        - app: elasticsearch
        - app: kibana
        - app: fluent-bit
        - app: log-generator

  workflow:
    template: elk-validation
    completion:
      mode: manual

  tutorial:
    exposeKubeconfig: true
    services:
      - name: elasticsearch
        target: app
        service: elasticsearch-master
        namespace: elk-tutorial
        port: 9200
      - name: kibana
        target: app
        service: kibana-kibana
        namespace: elk-tutorial
        port: 5601
