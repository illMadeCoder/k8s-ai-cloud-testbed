apiVersion: experiments.illm.io/v1alpha1
kind: Experiment
metadata:
  generateName: logging-comparison-
  namespace: experiments
spec:
  description: "Loki vs Elasticsearch logging comparison - architecture, resource usage, query performance"
  tags: ["comparison", "observability", "logging"]
  publish: true
  ttlDays: 7

  targets:
    - name: app
      cluster:
        type: gke
        preemptible: true
      observability:
        enabled: true
        transport: tailscale
      components:
        - app: loki
        - app: promtail
        - app: elasticsearch
        - app: kibana
        - app: fluent-bit
        - app: kube-prometheus-stack
          params:
            prometheus.enabled: "false"
            alertmanager.enabled: "false"
            grafana.enabled: "true"
        - app: log-generator

  workflow:
    template: logging-comparison-validation
    completion:
      mode: workflow
