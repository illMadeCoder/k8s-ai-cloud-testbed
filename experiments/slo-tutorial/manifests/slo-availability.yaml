# Availability SLO - 99.9% success rate
# Measures: successful requests / total requests
apiVersion: pyrra.dev/v1alpha1
kind: ServiceLevelObjective
metadata:
  name: metrics-app-availability
  namespace: slo-tutorial
  labels:
    app: metrics-app
    slo: availability
spec:
  # Target: 99.9% availability (43.8 minutes/month error budget)
  target: "99.9"
  # Rolling window: 30 days
  window: 30d
  # Service reference for grouping
  description: "99.9% of requests should succeed (no 5xx errors)"
  # SLI definition: ratio of errors to total
  indicator:
    ratio:
      errors:
        metric: http_requests_total{job="metrics-app",status=~"5.."}
      total:
        metric: http_requests_total{job="metrics-app"}
  # Alert configuration
  alerting:
    name: MetricsAppAvailability
    # Page when burning budget too fast
    burnrates: true
