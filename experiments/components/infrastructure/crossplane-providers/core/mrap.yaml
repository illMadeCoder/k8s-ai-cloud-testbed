---
# ManagedResourceActivationPolicies (MRAP)
#
# Controls which ManagedResourceDefinitions (MRDs) become active CRDs.
# Without this, the default MRAP activates ALL MRDs ('*') causing CRD bloat.
#
# See: https://docs.crossplane.io/latest/managed-resources/managed-resource-activation-policies/
---
apiVersion: apiextensions.crossplane.io/v1alpha1
kind: ManagedResourceActivationPolicy
metadata:
  name: base-providers
spec:
  activate:
    # provider-kubernetes
    - objects.kubernetes.crossplane.io
    - observedobjectcollections.kubernetes.crossplane.io
    # provider-helm
    - releases.helm.crossplane.io
---
apiVersion: apiextensions.crossplane.io/v1alpha1
kind: ManagedResourceActivationPolicy
metadata:
  name: gcp-storage-only
spec:
  activate:
    - buckets.storage.gcp.upbound.io
---
# GKE cluster provisioning (Phase 4)
apiVersion: apiextensions.crossplane.io/v1alpha1
kind: ManagedResourceActivationPolicy
metadata:
  name: gcp-gke-cluster
spec:
  activate:
    # compute.gcp.upbound.io - VPC networking
    - networks.compute.gcp.upbound.io
    - subnetworks.compute.gcp.upbound.io
    # container.gcp.upbound.io - GKE
    - clusters.container.gcp.upbound.io
    - nodepools.container.gcp.upbound.io
