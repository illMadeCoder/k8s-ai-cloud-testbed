---
# DeploymentRuntimeConfigs for all providers
# These must exist BEFORE providers reference them
---
apiVersion: pkg.crossplane.io/v1beta1
kind: DeploymentRuntimeConfig
metadata:
  name: helm-runtime-config
spec:
  deploymentTemplate:
    spec:
      selector:
        matchLabels:
          pkg.crossplane.io/provider: provider-helm
      template:
        metadata:
          labels:
            pkg.crossplane.io/provider: provider-helm
        spec:
          containers:
            - name: package-runtime
              resources:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
---
apiVersion: pkg.crossplane.io/v1beta1
kind: DeploymentRuntimeConfig
metadata:
  name: kubernetes-runtime-config
spec:
  deploymentTemplate:
    spec:
      selector:
        matchLabels:
          pkg.crossplane.io/provider: provider-kubernetes
      template:
        metadata:
          labels:
            pkg.crossplane.io/provider: provider-kubernetes
        spec:
          containers:
            - name: package-runtime
              resources:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
---
apiVersion: pkg.crossplane.io/v1beta1
kind: DeploymentRuntimeConfig
metadata:
  name: azure-runtime-config
spec:
  deploymentTemplate:
    spec:
      selector:
        matchLabels:
          pkg.crossplane.io/family: provider-family-azure
      template:
        metadata:
          labels:
            pkg.crossplane.io/family: provider-family-azure
            azure.workload.identity/use: "true"
        spec:
          securityContext:
            fsGroup: 65532
          containers:
            - name: package-runtime
              resources:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 250m
                  memory: 256Mi
---
apiVersion: pkg.crossplane.io/v1beta1
kind: DeploymentRuntimeConfig
metadata:
  name: aws-runtime-config
spec:
  deploymentTemplate:
    spec:
      selector:
        matchLabels:
          pkg.crossplane.io/family: provider-family-aws
      template:
        metadata:
          labels:
            pkg.crossplane.io/family: provider-family-aws
        spec:
          securityContext:
            fsGroup: 2000
          containers:
            - name: package-runtime
              resources:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 250m
                  memory: 256Mi
---
apiVersion: pkg.crossplane.io/v1beta1
kind: DeploymentRuntimeConfig
metadata:
  name: gcp-runtime-config
spec:
  deploymentTemplate:
    spec:
      selector:
        matchLabels:
          pkg.crossplane.io/family: provider-family-gcp
      template:
        metadata:
          labels:
            pkg.crossplane.io/family: provider-family-gcp
        spec:
          securityContext:
            fsGroup: 65532
          containers:
            - name: package-runtime
              resources:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 250m
                  memory: 256Mi
