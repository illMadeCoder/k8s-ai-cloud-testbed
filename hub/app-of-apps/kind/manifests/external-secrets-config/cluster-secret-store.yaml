# ClusterSecretStore for OpenBao
#
# Allows ExternalSecrets in any namespace to fetch secrets from OpenBao.
# Uses token authentication - the token is stored in a Kubernetes Secret.

apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: openbao
spec:
  provider:
    vault:
      server: "http://openbao.openbao.svc.cluster.local:8200"
      path: "secret"
      version: "v2"
      auth:
        tokenSecretRef:
          name: openbao-token
          namespace: external-secrets
          key: token
---
# Secret containing OpenBao root token
# This is created by the bootstrap script after OpenBao init.
# For production, use Kubernetes auth instead of token auth.
apiVersion: v1
kind: Secret
metadata:
  name: openbao-token
  namespace: external-secrets
type: Opaque
stringData:
  # Placeholder - bootstrap script will update this with actual token
  token: "root"
