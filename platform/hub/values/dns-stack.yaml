# k8s_gateway values for Talos hub
#
# Provides DNS resolution for LoadBalancer and Ingress resources.
# Query: dig @<service-ip> <service>.<namespace>.k8s.local
#
# ENVIRONMENT CONFIG: kube-vip pool 192.168.1.240-250
#   - values/argocd.yaml (loadBalancerIP)
#   - values/openbao.yaml (loadBalancerIP)

# Domain served by this DNS server
domain: k8s.local

# Watch all namespaces for Services/Ingresses
watchedResources:
  - Ingress
  - Service

# Expose via LoadBalancer with fixed IP for predictable DNS config
# kube-vip pool: DNS=.240, ArgoCD=.241, OpenBao=.242
service:
  type: LoadBalancer
  port: 53
  loadBalancerIP: 192.168.1.240

# Fallback DNS for non-k8s.local queries
fallthrough:
  enabled: true
  zones:
    - .
