# Argo Workflows Helm values for Kind hub
#
# Minimal config for local development. Workflows will orchestrate
# experiment cluster creation and execution.

# Controller settings
controller:
  # Use emissary executor (no docker socket needed)
  containerRuntimeExecutor: emissary

  # Default service account for workflows
  workflowDefaults:
    spec:
      serviceAccountName: argo-workflow

  # Resource limits for Kind
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Server (UI + API)
server:
  enabled: true

  # Auth mode - for local dev, use server mode (no auth)
  # Production should use sso
  authMode: server

  # Expose via NodePort (LoadBalancer IP reserved for dns-stack)
  serviceType: NodePort

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Workflow defaults
workflow:
  serviceAccount:
    create: true
    name: argo-workflow

  rbac:
    create: true

# Artifact storage disabled for Phase 1 (simple workflows don't need it)
# MinIO will be added in Phase 4.3 (Observability) for:
#   - Argo Workflows artifacts
#   - Loki log chunks
#   - Thanos metrics
#   - Tempo traces
useDefaultArtifactRepo: false
