# ClusterSecretStore for OpenBao
#
# Allows ExternalSecrets in any namespace to fetch secrets from OpenBao.
# Uses token authentication - the token is stored in a Kubernetes Secret.
#
# NOTE: The openbao-token Secret is created by the bootstrap script after
# OpenBao init, not managed by ArgoCD. This prevents the placeholder from
# overwriting the real token.

apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: openbao
spec:
  provider:
    vault:
      server: "http://openbao.openbao.svc.cluster.local:8200"
      path: "secret"
      version: "v2"
      auth:
        tokenSecretRef:
          name: openbao-token
          namespace: external-secrets
          key: token
